<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>maliput: ThreadPool Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">maliput
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classmaliput_1_1utility_1_1_thread_pool.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classmaliput_1_1utility_1_1_thread_pool-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ThreadPool Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Creates a pool of threads and a pool of tasks to be executed by the threads simultaneously. </p>
<p>Expected use of this class follows:</p>
<ul>
<li>Create an instance indicating the number of threads.</li>
<li>Load the tasks to run via <a class="el" href="classmaliput_1_1utility_1_1_thread_pool.html#ab60bad5d924a62faad599b82691da200" title="Adds tasks to the queue.">ThreadPool::Queue()</a> and save the return std::future value.</li>
<li>Run <a class="el" href="classmaliput_1_1utility_1_1_thread_pool.html#a07aaf1227e4d645f15e0a964f54ef291" title="Starts the threads to work on the tasks.">ThreadPool::Start()</a>.</li>
<li>Optionally, run <a class="el" href="classmaliput_1_1utility_1_1_thread_pool.html#ab60bad5d924a62faad599b82691da200" title="Adds tasks to the queue.">ThreadPool::Queue()</a> if needed.</li>
<li>Run <a class="el" href="classmaliput_1_1utility_1_1_thread_pool.html#af9d1bc46635e487c85720b943dd8ba28" title="Finishes the threads.">ThreadPool::Finish()</a>.</li>
<li>Optionally <a class="el" href="classmaliput_1_1utility_1_1_thread_pool.html#a484a870cd323db7e606fb1dae4a18416" title="Cancels all non-started tasks.">ThreadPool::cancel_pending()</a> to hint the finalization of running tasks.</li>
<li>Query the std::future results for consumption.</li>
<li>After calling <a class="el" href="classmaliput_1_1utility_1_1_thread_pool.html#af9d1bc46635e487c85720b943dd8ba28" title="Finishes the threads.">ThreadPool::Finish()</a> neither <a class="el" href="classmaliput_1_1utility_1_1_thread_pool.html#a07aaf1227e4d645f15e0a964f54ef291" title="Starts the threads to work on the tasks.">ThreadPool::Start()</a> nor <a class="el" href="classmaliput_1_1utility_1_1_thread_pool.html#ab60bad5d924a62faad599b82691da200" title="Adds tasks to the queue.">ThreadPool::Queue()</a> methods should be called.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>The API is not guaranteed to be thread safe. This class is provided to speed up build and load processes among others which are necessary but not part of the API. Use it with caution. </dd></dl>
</div>
<p><code>#include &lt;include/maliput/utility/thread_pool.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0bf34c4dfb73c2b78d1953cdfe818c3e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmaliput_1_1utility_1_1_thread_pool.html#a0bf34c4dfb73c2b78d1953cdfe818c3e">MALIPUT_NO_COPY_NO_MOVE_NO_ASSIGN</a> (<a class="el" href="classmaliput_1_1utility_1_1_thread_pool.html">ThreadPool</a>)</td></tr>
<tr class="separator:a0bf34c4dfb73c2b78d1953cdfe818c3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb14059ba8fb0a2101908a3826462959"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmaliput_1_1utility_1_1_thread_pool.html#afb14059ba8fb0a2101908a3826462959">ThreadPool</a> (std::size_t n)</td></tr>
<tr class="memdesc:afb14059ba8fb0a2101908a3826462959"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a pool of <code>n</code> threads.  <a href="classmaliput_1_1utility_1_1_thread_pool.html#afb14059ba8fb0a2101908a3826462959">More...</a><br /></td></tr>
<tr class="separator:afb14059ba8fb0a2101908a3826462959"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad41a30b11a0c9d8566ca1a53b4cf43f6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmaliput_1_1utility_1_1_thread_pool.html#ad41a30b11a0c9d8566ca1a53b4cf43f6">~ThreadPool</a> ()</td></tr>
<tr class="separator:ad41a30b11a0c9d8566ca1a53b4cf43f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab60bad5d924a62faad599b82691da200"><td class="memTemplParams" colspan="2">template&lt;class F , class R  = std::result_of_t&lt;F&amp;()&gt;&gt; </td></tr>
<tr class="memitem:ab60bad5d924a62faad599b82691da200"><td class="memTemplItemLeft" align="right" valign="top">std::future&lt; R &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classmaliput_1_1utility_1_1_thread_pool.html#ab60bad5d924a62faad599b82691da200">Queue</a> (F &amp;&amp;f)</td></tr>
<tr class="memdesc:ab60bad5d924a62faad599b82691da200"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds tasks to the queue.  <a href="classmaliput_1_1utility_1_1_thread_pool.html#ab60bad5d924a62faad599b82691da200">More...</a><br /></td></tr>
<tr class="separator:ab60bad5d924a62faad599b82691da200"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07aaf1227e4d645f15e0a964f54ef291"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmaliput_1_1utility_1_1_thread_pool.html#a07aaf1227e4d645f15e0a964f54ef291">Start</a> ()</td></tr>
<tr class="memdesc:a07aaf1227e4d645f15e0a964f54ef291"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the threads to work on the tasks.  <a href="classmaliput_1_1utility_1_1_thread_pool.html#a07aaf1227e4d645f15e0a964f54ef291">More...</a><br /></td></tr>
<tr class="separator:a07aaf1227e4d645f15e0a964f54ef291"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9d1bc46635e487c85720b943dd8ba28"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmaliput_1_1utility_1_1_thread_pool.html#af9d1bc46635e487c85720b943dd8ba28">Finish</a> ()</td></tr>
<tr class="memdesc:af9d1bc46635e487c85720b943dd8ba28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finishes the threads.  <a href="classmaliput_1_1utility_1_1_thread_pool.html#af9d1bc46635e487c85720b943dd8ba28">More...</a><br /></td></tr>
<tr class="separator:af9d1bc46635e487c85720b943dd8ba28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a484a870cd323db7e606fb1dae4a18416"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmaliput_1_1utility_1_1_thread_pool.html#a484a870cd323db7e606fb1dae4a18416">cancel_pending</a> ()</td></tr>
<tr class="memdesc:a484a870cd323db7e606fb1dae4a18416"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancels all non-started tasks.  <a href="classmaliput_1_1utility_1_1_thread_pool.html#a484a870cd323db7e606fb1dae4a18416">More...</a><br /></td></tr>
<tr class="separator:a484a870cd323db7e606fb1dae4a18416"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61da580fc69a74f3ef17956ba5fd88a0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmaliput_1_1utility_1_1_thread_pool.html#a61da580fc69a74f3ef17956ba5fd88a0">is_running</a> ()</td></tr>
<tr class="separator:a61da580fc69a74f3ef17956ba5fd88a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="afb14059ba8fb0a2101908a3826462959"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb14059ba8fb0a2101908a3826462959">&#9670;&nbsp;</a></span>ThreadPool()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmaliput_1_1utility_1_1_thread_pool.html">ThreadPool</a> </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a pool of <code>n</code> threads. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">n</td><td>Is the number of threads to be managed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">When</td><td>N is equal to zero. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad41a30b11a0c9d8566ca1a53b4cf43f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad41a30b11a0c9d8566ca1a53b4cf43f6">&#9670;&nbsp;</a></span>~ThreadPool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classmaliput_1_1utility_1_1_thread_pool.html">ThreadPool</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a484a870cd323db7e606fb1dae4a18416"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a484a870cd323db7e606fb1dae4a18416">&#9670;&nbsp;</a></span>cancel_pending()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cancel_pending </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cancels all non-started tasks. </p>

</div>
</div>
<a id="af9d1bc46635e487c85720b943dd8ba28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9d1bc46635e487c85720b943dd8ba28">&#9670;&nbsp;</a></span>Finish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Finish </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finishes the threads. </p>
<p>Waits for all tasks previously added to finish before destroying the threads. </p>

</div>
</div>
<a id="a61da580fc69a74f3ef17956ba5fd88a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61da580fc69a74f3ef17956ba5fd88a0">&#9670;&nbsp;</a></span>is_running()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool is_running </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>True when the threads are already started. </dd></dl>

</div>
</div>
<a id="a0bf34c4dfb73c2b78d1953cdfe818c3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bf34c4dfb73c2b78d1953cdfe818c3e">&#9670;&nbsp;</a></span>MALIPUT_NO_COPY_NO_MOVE_NO_ASSIGN()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MALIPUT_NO_COPY_NO_MOVE_NO_ASSIGN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmaliput_1_1utility_1_1_thread_pool.html">ThreadPool</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab60bad5d924a62faad599b82691da200"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab60bad5d924a62faad599b82691da200">&#9670;&nbsp;</a></span>Queue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::future&lt;R&gt; Queue </td>
          <td>(</td>
          <td class="paramtype">F &amp;&amp;&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds tasks to the queue. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">F</td><td>Is the functor type. </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">f</td><td>Is the task. </td></tr>
  </table>
  </dd>
</dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">R</td><td>Is the functor<code>s return type. @return A std::future&lt;R&gt; that will hold the result of</code>f`. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classmaliput_1_1common_1_1assertion__error.html" title="This is what MALIPUT_THROW_UNLESS throws.">maliput::common::assertion_error</a></td><td>When <a class="el" href="classmaliput_1_1utility_1_1_thread_pool.html#af9d1bc46635e487c85720b943dd8ba28" title="Finishes the threads.">Finish()</a> method was already called. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a07aaf1227e4d645f15e0a964f54ef291"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07aaf1227e4d645f15e0a964f54ef291">&#9670;&nbsp;</a></span>Start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts the threads to work on the tasks. </p>
<p>The main thread will not perform any task and will continue the execution. </p><dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classmaliput_1_1common_1_1assertion__error.html" title="This is what MALIPUT_THROW_UNLESS throws.">maliput::common::assertion_error</a></td><td>When this method is called consecutively without finishing the threads. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="thread__pool_8h.html">thread_pool.h</a></li>
<li><a class="el" href="thread__pool_8cc.html">thread_pool.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.15 -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacemaliput.html">maliput</a></li><li class="navelem"><a class="el" href="namespacemaliput_1_1utility.html">utility</a></li><li class="navelem"><a class="el" href="classmaliput_1_1utility_1_1_thread_pool.html">ThreadPool</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.nl/">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a></li>
  </ul>
</div>
</body>
</html>
